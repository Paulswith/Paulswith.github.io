<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>In &#39;flight of thought&#39;</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
  
  
  <meta name="description" content="Paulswith&apos;s blog">
<meta property="og:type" content="website">
<meta property="og:title" content="In &#39;flight of thought&#39;">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="In &#39;flight of thought&#39;">
<meta property="og:description" content="Paulswith&apos;s blog">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="In &#39;flight of thought&#39;">
<meta name="twitter:description" content="Paulswith&apos;s blog">
  
    <link rel="alternate" href="/atom.xml" title="In &#39;flight of thought&#39;" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>
    
  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css" >
  <link rel="stylesheet" href="/css/hiero.css" >
  <link rel="stylesheet" href="/css/glyphs.css" >
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "c696510b523841e638bb8225e25825e42e181bbf",
          enable_page_level_ads: true
      });
  </script>
  
</head>

<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Catégories"; 

  themeMenus["/tags"] = "Mot-clés"; 

  themeMenus["/about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="In &#39;flight of thought&#39;" rel="home"> In &#39;flight of thought&#39; </a>
            
          </h1>

          
            <div class="site-description">Paulswith&#39;s blog</div>
          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/categories">Catégories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/tags">Mot-clés</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class="" href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt="" src="">
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">
            
      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-mac逆向-窗口管理Divvy"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/12/03/mac逆向-窗口管理Divvy/">mac逆向-窗口管理Divvy</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/12/03/mac逆向-窗口管理Divvy/" class="article-date">
	  <time datetime="2017-12-03T09:57:54.000Z" itemprop="datePublished">December 3, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>Divvy个人感觉是最棒的一款窗口管理软件了~, 但是它动不动就会提示个五秒的窗口让你注册License,最近小试牛刀完IOSApp, 它给我提供一个入门的机会…</p>
</blockquote>
<h3 id="工具准备"><a href="#工具准备" class="headerlink" title="工具准备"></a>工具准备</h3><p><img src="/2017/12/03/mac逆向-窗口管理Divvy/predic.png" alt=""><br>mac上的逆向其实比较省, 你不需要额外的砸壳,直接就能能从包里面拿到执行文件.<br>class-dump 头文件.<br>用Hopper打开,反汇编一下方便待会查看.<br>然后神器依旧是monkeyDev, 它帮我们省去注入.dylib 和 重签名等”繁杂步骤”~</p>
<h3 id="入口分析"><a href="#入口分析" class="headerlink" title="入口分析"></a>入口分析</h3><p>本来大多数的步骤一定是从view开始, 有一款神器就[interface inspector], 但总会报错一些乱七八糟的问题,暂时还没调好, 于是乎我粗糙的从hopper搜索”Register”,(如果一开始搜的是首字母小写的话可能不会饶那么弯…),结果是这样子的,<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/first.png" alt=""><br>也查到其他无关的,最后确定就是这里,伪代码和汇编看并没有看出什么头绪,于是乎先看看有没有调用这里这个类相关.</p>
<p>追踪前,这里有一款强大的工具说下:<br><code>frida-trace</code>: frida-trace -m “-[PTHotKeyCenter <em>]”  Divvy<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/frida.png" alt=""><br>用法是frida-trace -m “&lt;+类方法/-实例方法&gt;[类名 方法名&lt;</em>代表全部&gt;]”  <ps aux查询到的允许名=""><br>执行后它会自动帮你生成跟踪的js文件,然后监听所指定的方法.</ps></p>
<p>一开始觉得吧, PTHotKeyCenter不像是很关键的类, 也是没怎么写Mac的App的原因,但还是监听了一下:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/trace.png" alt=""><br>我尝试打开它,然后随便输入一串号码注册, 发现他怎么整都只打印这些, 而且就在我使用快捷键的时候~<br>随意也明白了,这就是”热键”,仅此而已…</p>
<h3 id="动态调试"><a href="#动态调试" class="headerlink" title="动态调试"></a>动态调试</h3><p>进行到这里其实是无头绪的, 然后想着是从mondev进行动态调试,看看能不能从调用栈看看这里的情况.<br>想着hook哪个方法的时候,脑子冒个灵光,想到了这个view的展示, 我就输入”)show”看看有没有什么可疑的,结果:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/show.png" alt=""> 十分意外第一个方法,很明显这个方法应该是展示注册这个View的,而且还待会参数时间.<br>如果是这个方法果然没错, 那么我可能得到,一是找不到更好的hook方法,duration的参数改为最少的时间,或者可以尝试return这部展示的操作. 其次先Hook下看看调用栈,是什么决定它展示也是可以的, 于是开始我的Hook代码.<br>MonkeyDev默认是subStrate的hook方法代码, 当然也是可以替换成其它的(按道理当然可以~):<br>这是一开始的代码:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/array.png" alt=""><br>但是允许会报错,其中需要修改:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">static void newHookFunc(AppController* self,SEL _cmd,id array)&#123; // &#125;</div><div class="line">                    //replacet to | //下面</div><div class="line">static void newHookFunc(AppController* self,SEL _cmd,id arg1, id arg2)&#123; // &#125;</div><div class="line">// 需要指明多少个参数, 不知道参数类型就使用泛型id</div></pre></td></tr></table></figure></p>
<p>build一下且进入调试后, 用时在<code>static void newHookFunc(AppController* self,SEL _cmd,id arg1, id arg2){</code> 这里Xcode断点一下:<br>但如果直接执行还需要做两部:</p>
<ul>
<li>关闭原程序</li>
<li>如果类似这种辅助类APP,需要到系统中关闭它的辅助项.</li>
<li>可能你还不熟悉如何进入调试macApp ,那快去翻一下MonkeyDev的wiki,或者见文末</li>
</ul>
<p>然后进入注册页面,果不其然的断点触发.然后我打印了一下调用栈:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/stack.png" alt=""><br>是的,一眼看去都是非Divvy调用栈的可用信息~ 有点陷入僵局了.</p>
<h3 id="人品才是最高逆向"><a href="#人品才是最高逆向" class="headerlink" title="人品才是最高逆向"></a>人品才是最高逆向</h3><p>有点朦胧的时候, 我回到<code>- (void)showLicensingWindow:(id)arg1 withTimeoutDuration:(int)arg2;</code>这个方法中, 结果真的很意外,其中有个地方很雷人:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/ok.png" alt=""><br><code>- (BOOL)verifyLicense;</code>这真的不能再明白的一个方法了,不管是不是依然开始Hook一下.mac的逆向就是各种Hook~<br>hook代码如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">#import &quot;Divvy.h&quot;</div><div class="line">#import &quot;substrate.h&quot;</div><div class="line"></div><div class="line">@class AppController;</div><div class="line"></div><div class="line">static BOOL (*originFunc)(AppController*,SEL,id);</div><div class="line">static BOOL newHookFunc(AppController* self,SEL _cmd,id array)&#123;</div><div class="line">    return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">static void __attribute__((constructor)) initialize(void) &#123;</div><div class="line">    MSHookMessageEx(objc_getClass(&quot;AppController&quot;),@selector(verifyLicense), (IMP)&amp;newHookFunc, (IMP*)&amp;originFunc);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>依然Build一下跑起来, 真的很意外,因为启动的时候默认也是要弹一次注册框的, 这次启动并没有,启动后直接什么也展示(而且我忘记断点了). 手动选到注册框看一下怎么肥事:<br><img src="/2017/12/03/mac逆向-窗口管理Divvy/finish.png" alt=""><br>真的很意外, 就像小黄书的作者狗神中说的,运气也是逆向的一部分.嗨森~</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>谁说人品不是逆向的一部分呢, 实践就能找到快乐.第一次Mac的调试竟然这么快就收获自我成就感,赚到了.<br>App的话我打包上传到<a href="https://github.com/Paulswith/ToolsScript/tree/master/Divvy_windowManagerTool" target="_blank" rel="external">这里</a></p>
<p>特别鸣谢大佬协助:<br><a href="https://github.com/AloneMonkey/MonkeyDev/wiki/Mac%E5%BA%94%E7%94%A8%E6%8F%92%E4%BB%B6" target="_blank" rel="external">monkeyDev之MAC应用</a><br><a href="http://www.alonemonkey.com/2017/05/31/get-start-with-mac-reverse/" target="_blank" rel="external">庆哥的一篇文章走进MAC逆向</a><br><a href=""><code>膜庆哥</code></a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/reverseEngineering/">reverseEngineering</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macApp-Divvy破解/">macApp-Divvy破解</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-Unread逆向-去除阅读限制"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/28/Unread逆向-去除阅读限制/">UNREAD逆向-去除阅读限制</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/28/Unread逆向-去除阅读限制/" class="article-date">
	  <time datetime="2017-11-28T13:25:31.000Z" itemprop="datePublished">November 28, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>背景 : UNREAD是一款很棒的RSS阅读器, 免费版本有50条阅读的限制. 强化在非越狱机上的逆向之旅<br>因为是巩固逆向的知识阶段,踩坑是必然的, 但是多么绕的就不讲了, 但是要mark最后走对这个方式,后面也要逐渐总结对的方法</p>
</blockquote>
<h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>UNREAD要求ios10以上才可以下载,所以我的935设备无法下载也无法砸壳, 所幸的是PP助手能搜到,不过版本低了0.2, 用起来没差别.</p>
<blockquote>
<p>确认需求 :  去除阅读限制</p>
</blockquote>
<h3 id="分析"><a href="#分析" class="headerlink" title="分析"></a>分析</h3><h4 id="正向分析思路"><a href="#正向分析思路" class="headerlink" title="正向分析思路"></a>正向分析思路</h4><p><img src="/2017/11/28/Unread逆向-去除阅读限制/no.png" alt=""><br>如果是我设计呢:<br>    目标是个tableview , “UNLOCK UNREAD”这一cell显示了当前剩余可阅读的数量.每次点击进入文章阅读的时候,可读数量 -= 1; 有一个模型来记录这里的数量,<br>在tableview这个控制器,viewWillApear:的时候刷新row.</p>
<p>当时想的是:<br>那么如果是tableiview, dataSource方法必然有tableview:cellForRowAtIndexPath:被调用, 如果能找到模型,直接hook模型的调用或许是第一思路.但是熬到三点还没睡我才明白我踩坑了, 这里不累赘了,一把泪. </p>
<h4 id="view层嵌入"><a href="#view层嵌入" class="headerlink" title="view层嵌入"></a>view层嵌入</h4><p>从monkeyDev启动项目,拖入我们的APP后启动到设备上, 默认是会注入reveal动态库的, APP启动成功后, 进入到主页, 然后mac启动reveal:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/reveal.png" alt=""><br><img src="/2017/11/28/Unread逆向-去除阅读限制/ravealVC.png" alt=""></p>
<p>reveal启动后点到我们目标view,可以看到这是一个tableview的cell,”50 ARTICLES LEFT”是cellContentView的label, 查看右边, 我们能看到这个页面的控制器.<br>“NSRHomeViewController”</p>
<h4 id="分析控制器"><a href="#分析控制器" class="headerlink" title="分析控制器"></a>分析控制器</h4><p>把class-dump出来的头文件拖到Xcode项目, 搜一下”NSRHomeViewController.h”可以看到这个头文件, 所幸头文件不多,我有了部分时间慢慢看这些方法,尝试发现敏感名称, 其中最让我敏感的是这个:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/array.png" alt=""><br><img src="/2017/11/28/Unread逆向-去除阅读限制/method.png" alt=""><br>第二个方法这未免太明显~, 其它大概也预览了一下, 图一看到是NSArray, 或许会存储数据的模型.</p>
<h4 id="断点可疑调用"><a href="#断点可疑调用" class="headerlink" title="断点可疑调用"></a>断点可疑调用</h4><p>二进制文件拉到Hopper反汇编后, 搜一下三个方法</p>
<blockquote>
<p>moreItems &amp; setMoreItems &amp; updateUnlockInfo</p>
</blockquote>
<p>获取它们的静态地址后,在LLDB查看下初始偏移地址, 加上并断点这三位.<br>分析的时候知道, 它是在点击文章阅读的时候才减一. 那么现在就进入文章里面,触发我们的断点. 果不其然它触发了,查看一下调用栈:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/stack.png" alt=""></p>
<p>其中#0一定是我们当前被调用的方法, 那是谁呢?<br>嗯,就是<code>updateUnlockInfo</code><br><img src="/2017/11/28/Unread逆向-去除阅读限制/soudao.png" alt=""><br>回溯上层的调用栈, 初步我们先查看下这些Unread模块的栈,看看是否我们调用的信息.分别减去初始偏移量后他们依次是:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">-[UNRPermissionManager setRemainingCount:]</div><div class="line">-[UNRPermissionManager permissionToReadArticleWithUniqueID:]</div><div class="line">-[UNRArticlesListViewController showArticleViewer]</div><div class="line">-[UNRArticlesListViewController deadEndTapTimerFired:]</div></pre></td></tr></table></figure></p>
<h4 id="逻辑梳理"><a href="#逻辑梳理" class="headerlink" title="逻辑梳理"></a>逻辑梳理</h4><p>hopper查看一下updateUnlockInfo的伪代码:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/updateINFO.png" alt=""><br>发现它只是负责调用reloadSection这个刷新动作,说明数据操作在上层<br>因此继而hopper查看一下 <code>setRemainingCount:</code><br><img src="/2017/11/28/Unread逆向-去除阅读限制/remain.png" alt=""><br>我们可以看到他的参数只有一个,而且是unsinged long long 类型, 猜测他是又负责调用传递的参数,而这个参数可能就是需要更新的数量.<br>那么线索就继续追溯到上层调用<code>permissionToReadArticleWithUniqueID</code>, 从hopper找到并查看,翻开伪代码可以看到如下:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/remainFromHere.png" alt=""><br>setRemainingCount:是这里调的, 而且发现UNREAD不仅记录未使用的次数,还记录了已使用的次数,如果过早的Hook<code>setRemainingCount:</code>应该是起不了作用的.<br>仔细观察这一代码段,发现这里只有一个return出口,且存在多个逻辑判断跳转分支,可以配合hopper的逻辑视图看到:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/jumpPic.png" alt=""></p>
<blockquote>
<p>从伪代码结合汇编来看, 这里就是我们的目标了, 但我们怎么挑选这些分支呢? 个人觉得是三点:<br>1 首先我们知道我们要hook,大多时候是针对方法, 如果一个分支的逻辑是被某个特定的方法可以扭转的,基本上它就是我们想要的.<br>2 其次是对整个逻辑改动最小的, 不要影响其他的功能实现.<br>3 我们能比较稳妥确定的逻辑.猜可不能解决所有问题.</p>
</blockquote>
<h4 id="分析hook点"><a href="#分析hook点" class="headerlink" title="分析hook点"></a>分析hook点</h4><p>这里其实也是比较贪婪操作了, <code>?&lt;</code> 看图:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/UP.png" alt=""><br>对比后发现第一个分支的逻辑比较清晰:<br><code>storeCountry</code>返回了一个string类型, 与0x100289de0这个地址的值进行了比较, 如果相等则直接跳转到地址<code>0x10013e714</code>,并赋值为<code>0x1</code>即不为假的, 继而跳转到<code>0x10013e718</code>,返回真.<br> 从最简单的来看,这个方法绕开<code>remainingCount</code>不会导致阅读文章的时候可阅读数量 -= 1. 其实到这里基本就能实现我们的功能了, 只要让<code>storeCountry</code>返回0x100289de0一样的字符串就可以了.<br>so , 继续看看<code>storeCountry</code>的返回逻辑,依旧常规Hopper搜方法:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/store.png" alt=""><br>从UNRKeyChain获取的一个字符串,如果等于”:happysquid:”的话就返回”:happysquid:”,不然就返回这个<code>&amp;0x100284130</code>, 就这两种情况. </p>
<p>0x100289de0是一个静态地址,直接搜一下:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/place.png" alt=""><br>也是”:happysquid:”, 到这里基本就可以大胆试一试了.</p>
<h3 id="hook代码"><a href="#hook代码" class="headerlink" title="hook代码"></a>hook代码</h3><p>全部的Hook代码如下, copy执行即:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">@interface UNRIAPManager</div><div class="line">- (NSString *) storeCountry;</div><div class="line">@end</div><div class="line"></div><div class="line">CHDeclareClass(UNRIAPManager)</div><div class="line">CHOptimizedMethod(0, self, NSString*, UNRIAPManager,storeCountry)&#123;</div><div class="line">    NSLog(@&quot;is hook succeed? -- -------------------&quot;);</div><div class="line">    return @&quot;:happysquid:&quot;;</div><div class="line">&#125;</div><div class="line"></div><div class="line">CHConstructor&#123;</div><div class="line">    CHLoadLateClass(UNRIAPManager);</div><div class="line">    CHClassHook(0, UNRIAPManager, storeCountry);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<blockquote>
<p>思路就是直接Hook<code>storeCountry</code>,让其永远返回”:happysquid:”,这里似乎也是比较粗糙的做法(如何这里是后台动态下发呢? ),但换个思路想, 这里返回”:happysquid:”,逻辑的意思就是 “I’m the VIP” 的暗号,既然如此何乐不为. 碰碰运气跑一下看看. 这不就是逆向的随机性乐趣所在吗…<br>尝试就是收获,目前自用并未发现问题.几乎天天在这里APP里面看前辈文章的,稳的</p>
</blockquote>
<p>看下执行效果:<br><img src="/2017/11/28/Unread逆向-去除阅读限制/succeed.png" alt=""><br>半意外收获,这里的提示语也没有了,所以说明我的猜测是对的.<br>其实hook代码的就这么几行, 但是逻辑的分析却耗了我一个熬到3点钟的晚上, 小小成就给自己泡一杯咖啡吧.</p>
<h3 id="简单总结下"><a href="#简单总结下" class="headerlink" title="简单总结下"></a>简单总结下</h3><h4 id="乐观的"><a href="#乐观的" class="headerlink" title="乐观的"></a>乐观的</h4><p>1 成功的入口主要是<code>updateUnlickInfo</code>这个清晰可爱的方法和方法的调用栈, 我们可以通过调用栈来回溯层次调用逻辑,找到可以被hook的突破口.<br>2 实战才是领悟真谛的唯一途径. 通过本次实战, 逆向的思路更加清晰了, hopper一些反汇编工具调整好正确打开的姿势.</p>
<h4 id="悲观的"><a href="#悲观的" class="headerlink" title="悲观的"></a>悲观的</h4><p>1 本次逆向的时候比较长,大约耗费15个小时+(失去的还有很差的脸色),其中对于monkeyDev集成不太熟练,LLDB插件chisel是个可以提升点.<br>2 UNREAD如此明文的存储确实在安全的思路太过单纯了,或许在新版本已经修复了(这是从PP助手下载的1.6,新版本的是1.8的样子).</p>
<p>[<code>逆向之旅NICE</code>]<br>后面会谈谈如何加密敏感数据.</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/reverseEngineering/">reverseEngineering</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/逆向UNREAD/">逆向UNREAD</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-砸壳最稳dumpdecrypted"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/24/砸壳最稳dumpdecrypted/">砸壳最稳dumpdecrypted</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/24/砸壳最稳dumpdecrypted/" class="article-date">
	  <time datetime="2017-11-24T13:17:28.000Z" itemprop="datePublished">November 24, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>之前写过一篇<a href="https://paulswith.github.io/2017/11/17/clutch%E5%AF%B9app%E8%BF%9B%E8%A1%8C%E7%A0%B8%E5%A3%B3/" target="_blank" rel="external">clutch砸壳</a>的, 但clutch似乎没有100%成功的情况, 所以还是得老司机来.</p>
</blockquote>
<h3 id="编译得到-dylib"><a href="#编译得到-dylib" class="headerlink" title="编译得到.dylib"></a>编译得到.dylib</h3><p><a href="https://github.com/stefanesser/dumpdecrypted" target="_blank" rel="external">https://github.com/stefanesser/dumpdecrypted</a><br>下载后<code>make</code>一下会生成一个.dylib<br><img src="/2017/11/24/砸壳最稳dumpdecrypted/build.png" alt=""></p>
<h3 id="拷贝到设备上"><a href="#拷贝到设备上" class="headerlink" title="拷贝到设备上"></a>拷贝到设备上</h3><p><code>iproxy 2222 22</code><br>开启一个映射后:<br><code>scp -P 2222 dumpdecrypted.dylib root@localhost:/tmp/</code></p>
<h3 id="获取App目录"><a href="#获取App目录" class="headerlink" title="获取App目录"></a>获取App目录</h3><p>启动下目标App,cycript到进程中, 输入:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">NSHomeDirectory()</div></pre></td></tr></table></figure></p>
<h3 id="拷贝-dylib到App目录"><a href="#拷贝-dylib到App目录" class="headerlink" title="拷贝.dylib到App目录"></a>拷贝.dylib到App目录</h3><p>退出cycript,切换到App目录后:<br> 拷贝.dylib 到得到的目录:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp /tmp/dumpdecrypted.dylib  .</div></pre></td></tr></table></figure></p>
<p>mible用户查看进程:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">su mobile    #切换普通用户</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/24/砸壳最稳dumpdecrypted/quit.png" alt=""></p>
<h3 id="开始砸壳"><a href="#开始砸壳" class="headerlink" title="开始砸壳"></a>开始砸壳</h3><p>启动下App,然后:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ps -e  | grep /Application   #查看App进程,我们需要正确的二进制文件地址</div></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">DYLD_INSERT_LIBRARIES=dumpdecrypted.dylib &lt;上面的二进制地址&gt;</div></pre></td></tr></table></figure>
<p><img src="/2017/11/24/砸壳最稳dumpdecrypted/perform.png" alt=""></p>
<h3 id="查看文件"><a href="#查看文件" class="headerlink" title="查看文件"></a>查看文件</h3><p><img src="/2017/11/24/砸壳最稳dumpdecrypted/end.png" alt=""><br><img src="/2017/11/24/砸壳最稳dumpdecrypted/end2.png" alt=""></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/reverseEngineering/">reverseEngineering</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/砸壳/">砸壳</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-去除OplayerLite广告提示-越狱机"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/24/去除OplayerLite广告提示-越狱机/">去除OplayerLite广告提示-越狱机</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/24/去除OplayerLite广告提示-越狱机/" class="article-date">
	  <time datetime="2017-11-24T09:56:29.000Z" itemprop="datePublished">November 24, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>最近在学习逆向相关的实践+踩坑, 庆哥的视频中一个课程是对于OPlayerLite进行进行广告处理了, 因为是去年的课程App也更新了逻辑, 我沿着先辈的道路把坑撸了一把, mark这场一天一夜的战斗.</p>
</blockquote>
<h3 id="分析层级结构"><a href="#分析层级结构" class="headerlink" title="分析层级结构"></a>分析层级结构</h3><h4 id="定位目标对象"><a href="#定位目标对象" class="headerlink" title="定位目标对象"></a>定位目标对象</h4><p>连接到越狱机(切换到无网络模式, 因为Oplayer lite有网络的时候加载的广告是不同的,不利于分析), 同时点击任意视频,进入到视频播放页面, 我们会看到广告的view,上面有一行文本”Buy the full version to remove ads?”<br>这时候我们连接到cycript打印下层级:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UIApp.keyWindow.recursiveDescription().toString()</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/fe.png" alt=""><br>由于我已去除了过了,又从App Store重新下载, 发现还是没有广告,图片暂时就没哈<br>其中有引起我们注意的层级是:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">|    |    | &lt;UIView: 0x17501dc0; frame = (0 0; 320 50); layer = &lt;CALayer: 0x177a8eb0&gt;&gt;</div><div class="line">|    |    |    | &lt;UIButton: 0x17778a30; frame = (0 0; 320 50); opaque = NO; layer = &lt;CALayer: 0x177a8d80&gt;&gt;</div><div class="line">|    |    |    |    | &lt;UIImageView: 0x17630de0; frame = (0 0; 320 50); clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = &lt;CALayer: 0x17630ec0&gt;&gt;</div><div class="line">|    |    |    | &lt;UILabel: 0x176b1380; frame = (60 0; 260 50); text = 'Buy the full version to r...'; userInteractionEnabled = NO; layer = &lt;_UILabelLayer: 0x1762fc70&gt;&gt;</div></pre></td></tr></table></figure></p>
<p>其中<code>UILabel: 0x176b1380</code>中的text属性跟我们看到的ads上是一样的,它的同级view是UIButton, 父view是UIView .<br> 因为咱们要解决的目标是view, 尤为关注是这里的frame.size, 它们都是<code>320 50</code>, label也是height=50. 把这部分截图保存下来,待会查找的时候需要用到</p>
<h4 id="正向分析设计"><a href="#正向分析设计" class="headerlink" title="正向分析设计"></a>正向分析设计</h4><blockquote>
<p>划重点: 从正向的开发的角度, 分析它是如何设计的</p>
</blockquote>
<p>如果是我开发君, 我的伪代码大概如下<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if  (!payBuyFullViersion)  &#123;</div><div class="line">    AdsView *adsview =  [[AdsView alloc] init];</div><div class="line">    [self.palyerView addSubview:adsview]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>可能其他的逻辑未必跟我符合. 但是一定必然的是, 这个adsView 必须是addSubview上去的,addSubview是UIKit中view的方法, 咱们需要静态分析这个地址, 通过断点来查看它对应的调用者/参数, 从而拿到地址,来定位到OplayerLite</p>
<h3 id="静态分析"><a href="#静态分析" class="headerlink" title="静态分析"></a>静态分析</h3><h4 id="从UIKit入手"><a href="#从UIKit入手" class="headerlink" title="从UIKit入手"></a>从UIKit入手</h4><p>我们需要用到lldb, 连接到设备, 查看UIKit的存储地址, 然后通过IDA查看addSubview:的静态代码地址.<br>本地先映射一下 <code>iproxy 1234 1234</code> , 然后越狱启动<code>debugserver  *:1234  -a &lt;pid&gt;</code><br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/debugS.png" alt=""><br>本地连接:<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/lldb.png" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">im list -o -f</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/offset.png" alt=""><br>得到了Oplayer lite的偏移地址和UIKit偏移地址<br>同时我们看到了UIKit的文件地址(可能有的地址是在设备上, 那么你需要拷贝到本地,不想这样子就连一下Xcode,你就会在本地看到它了)</p>
<p>IDA分析UIKit, 并获取addSubview:的地址:<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/viewadd.png" alt=""><br>在lldb下断点,记得加上上面看到的偏移,如:<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/bradd.png" alt=""><br>然后进入到播放界面触发断点</p>
<h4 id="体力活查询"><a href="#体力活查询" class="headerlink" title="体力活查询"></a>体力活查询</h4><p>因为上面我们讲到<br><code>[self.palyerView addSubview:adsview]</code><br>这里的adsView是作为参数的,所以我们需要Print object r2<br>漫长的开始 <code>c</code>和粘贴 <code>po $r2</code>,一遍持续一遍注意看打印出来的frame,是不是有我们符合的<code>frame=(n,n,320,50)</code><br>这可能会很漫长,取决于当前页面子元素数量和人品~</p>
<p>…….<br>当你发现frame跟我们所看到符合的时候,那么基本就可以确认是它了.同时有个地方要注意:<br>你需要看到这个地址来自于Oplayer lite才可以, 否则执行以下<code>ni</code>,执行下一条汇编直到看见它<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/fit.png" alt=""><br>而第一条指令的地址就是我们要的地址, 减去我们上面的偏移地址,拿到静态代码的地址.</p>
<h3 id="分析目标静态代码"><a href="#分析目标静态代码" class="headerlink" title="分析目标静态代码"></a>分析目标静态代码</h3><h4 id="对逻辑静态分析"><a href="#对逻辑静态分析" class="headerlink" title="对逻辑静态分析"></a>对逻辑静态分析</h4><p>通过上面拿到的地址, 我们可以看到这里是一个实例方法<br><code>-[PlayViewController addAds_OnLocalAds]</code><br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/addfun.png" alt=""><br>不是很仔细的看了一遍伪代码,这个方法是被调用来展示view,但是否展示的逻辑并不在这里, 我们需要看谁是它的调用方, 因为删掉之前的断点,重新在<code>-[PlayViewController addAds_OnLocalAds]</code>这个方法上下断点, 依然加上偏移地址(这里的偏移地址已经是OPlayerlite了).<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">br s -a &apos;0x00052000+0x002A49F8&apos;</div><div class="line">#断点触发后, 打印lr寄存器的值</div><div class="line">p/x $lr</div></pre></td></tr></table></figure></p>
<p>LR寄存器(R14)可以理解当代码段执行完毕后要回到调用者的地址.<br>通过LR寄存器得到的值, 我们减去偏移地址,可以得到调用者在静态代码的位置.<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/spass.png" alt=""><br>依然借助IDA分析, 可以看到msg_send的一些部分是相关的设置方向, frame, getWidth等方法, 而调用的位置就在viewWillAppear:这里.</p>
<h4 id="寻找绕弯的方法"><a href="#寻找绕弯的方法" class="headerlink" title="寻找绕弯的方法"></a>寻找绕弯的方法</h4><p>现在, 我们定位到了调用添加广告View的代码块, 继续往上翻,能不能找到帮助我们跳过这里的逻辑呢?<br>果然, 神器就是神器, 留意左边这根线:<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/findMethod.png" alt=""><br>辅助IDA的伪代码,我们还能发现些神马:<br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/jumpCode.png" alt=""></p>
<blockquote>
<p>这里的两个跳转对应了两个逻辑判断分支, 我在图片中表明了, 逻辑2的情况其实稍加复杂, 但我在逻辑1发现了关键点:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if ( !((unsigned int)+[OlimSoftUtility isUpgraded](&amp;OBJC_CLASS___OlimSoftUtility, &quot;isUpgraded&quot;, a3) &amp; 0xFF) )</div></pre></td></tr></table></figure></p>
</blockquote>
<p>伪代码的意思是<code>+[OlimSoftUtility isUpgraded]</code>的返回值和 #0xFF 进行了逻辑与的运算, 理解到 #0xFF 是非0类型必为真, 而现在只需要<code>+[OlimSoftUtility isUpgraded]</code>能返回真即可跳过这段代码. 这个猜想是否正确,毕竟是伪代码,所以需要对汇编部分进行确认:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">__text:0029D2F8     BLX.W           _objc_msgSend ; +[OlimSoftUtility isUpgraded]</div><div class="line">__text:0029D2FC     TST.W           R0, #0xFF</div></pre></td></tr></table></figure></p>
<p>第一行很容易看出是发送了消息,也就是刚才说的调用了<code>+[OlimSoftUtility isUpgraded]</code>这个方法, 而第二行, 将第一行<code>+[OlimSoftUtility isUpgraded]</code> 返回值 与 0xFF进行了 <code>TST</code>指令, 对于目前汇编的底子不硬,通过查询资料得知:</p>
<blockquote>
<p>TST 指令对 Rn 中的值和 Operand2 的值按位进行“与”运算。 除了结果会被丢弃以外，这与 ANDS 指令功能相同。</p>
</blockquote>
<p>那么就基本能确定结论了:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if ( ([OlimSoftUtility isUpgraded] &amp;&amp; 0xFF) == NO ) &#123;</div><div class="line">    // 添加广告</div><div class="line">&#125;</div><div class="line">// 0xFF 固定为YES</div></pre></td></tr></table></figure></p>
<h4 id="头文件最终确认"><a href="#头文件最终确认" class="headerlink" title="头文件最终确认"></a>头文件最终确认</h4><p>找到class-dump 出的头文件目录:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">grep -rn "isUpgraded" ./headers</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/findH.png" alt=""><br><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/H1.png" alt=""><br>发现它就是一个类方法,很纯粹.那么也不用太多想法, 试试就试试了.</p>
<h3 id="编写代码"><a href="#编写代码" class="headerlink" title="编写代码"></a>编写代码</h3><h4 id="code"><a href="#code" class="headerlink" title="code"></a>code</h4><p><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/tweek.png" alt=""></p>
<p>让个惊讶的tweak.xm代码:<br>“当然我这样子处理应该是会引起某些问题了, 但这是目前我分析到的能力”<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">%hook OlimSoftUtility</div><div class="line"></div><div class="line">+ (BOOL)isUpgraded &#123;</div><div class="line">	%log;</div><div class="line">	// NSLog(@&quot;replace this method!!!!!!!!!!!!!!!!!!!&quot;);</div><div class="line">	return YES;</div><div class="line">&#125;</div><div class="line"></div><div class="line">%end</div></pre></td></tr></table></figure></p>
<p>Makefile代码:<br>我指定了IP 和 Port, 待会可以在直接调用 make install 进行安装<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">export THEOS_DEVICE_IP=localhost    </div><div class="line">export THEOS_DEVICE_PORT=2222</div><div class="line">export ARCHS=armv7</div><div class="line">export TARGET=iphone:clang:latest:8.0</div><div class="line">export THEOS_MAKE_PATH=/opt/theos/makefiles</div><div class="line">export THEOS=/opt/theos</div><div class="line"></div><div class="line">include $(THEOS)/makefiles/common.mk</div><div class="line"></div><div class="line">TWEAK_NAME = removeOplayerAds</div><div class="line">removeOplayerAds_FILES = Tweak.xm</div><div class="line"></div><div class="line">include $(THEOS_MAKE_PATH)/tweak.mk</div><div class="line"></div><div class="line">after-install::</div><div class="line">	install.exec "killall -9 SpringBoard"</div></pre></td></tr></table></figure></p>
<h4 id="一些小坑点"><a href="#一些小坑点" class="headerlink" title="一些小坑点"></a>一些小坑点</h4><h4 id="没找到dpkg-deb"><a href="#没找到dpkg-deb" class="headerlink" title="没找到dpkg-deb:"></a>没找到dpkg-deb:</h4><p>dpkg-deb的原名是/opt/theos/bin/dm.pl, 你需要把它的名字改为dpkg-deb,然后执行下面的语句<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">➜  removeoplayerads make package</div><div class="line">==&gt; Error: /Applications/Xcode.app/Contents/Developer/usr/bin/make package requires dpkg-deb.</div><div class="line">make: *** [internal-package-check] Error 1</div><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">## 决绝方法</span></span></div><div class="line">➜  removeoplayerads sudo perl -i -pe 'y|\r||d' /opt/theos/bin/dpkg-deb</div><div class="line">Password:</div></pre></td></tr></table></figure></p>
<h4 id="BundleID最准确的获取方法"><a href="#BundleID最准确的获取方法" class="headerlink" title="BundleID最准确的获取方法"></a>BundleID最准确的获取方法</h4><p>cycript 进入到目标APP进程后:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[[NSBundle mainBundle] bundleIdentifier]</div></pre></td></tr></table></figure></p>
<h4 id="汇编查询"><a href="#汇编查询" class="headerlink" title="汇编查询"></a>汇编查询</h4><p>干货, 大全!!!<br><a href="http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204ic/Cihbjcag.html" target="_blank" rel="external">http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204ic/Cihbjcag.html</a></p>
<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="/2017/11/24/去除OplayerLite广告提示-越狱机/0ads.png" alt=""></p>
<p><code>[没什么比实践到的收获有成就感了,它是继续前行的动力之一]</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/reverseEngineering/">reverseEngineering</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/实战去除广告/">实战去除广告</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-seleniumANDrequest辅助爬虫"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/23/seleniumANDrequest辅助爬虫/">seleniumANDrequest辅助爬虫</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/23/seleniumANDrequest辅助爬虫/" class="article-date">
	  <time datetime="2017-11-23T11:42:20.000Z" itemprop="datePublished">November 23, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>爬虫写多了时候会发现, 很多的时候总是有些问题被阻挡, 虽然越来越多的AI诸如此类的工具也正在破解升级, 但在在小型的爬虫之前,selenium可以帮助我们辅助一些代码层无法越过的坑,拿到完整的cookies, 让客户端对我们身份证验证已通过之后,移交到深层的代码里, 进行操作.</p>
</blockquote>
<h3 id="先用selenium拿到最真实的cookies"><a href="#先用selenium拿到最真实的cookies" class="headerlink" title="先用selenium拿到最真实的cookies"></a>先用selenium拿到最真实的cookies</h3><p>似乎这没什么好讲的, 贴下我的代码截图吧…<br>selenium小封装:<br><img src="/2017/11/23/seleniumANDrequest辅助爬虫/login_selenium.png" alt=""></p>
<p>小爬虫的时候或许都可以跳过这一步, 你可以进行一个长时间的sleep,手工进行登录,填入验证码等</p>
<h3 id="cookies移交"><a href="#cookies移交" class="headerlink" title="cookies移交"></a>cookies移交</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">set_session_cookie</span><span class="params">(self)</span>:</span></div><div class="line">    <span class="string">"""</span></div><div class="line"><span class="string">    cookie 移植到 session,方便后续操作</span></div><div class="line"><span class="string">    """</span></div><div class="line">    self.driver.get(<span class="string">'http://url'</span>)</div><div class="line">    <span class="keyword">for</span> subCookie <span class="keyword">in</span> self.driver.get_cookies():</div><div class="line">        self.session.cookies.set(subCookie[<span class="string">u'name'</span>], self.driver.get_cookie(subCookie[<span class="string">u'name'</span>])[<span class="string">'value'</span>])</div></pre></td></tr></table></figure>
<p>self.driver.get_cookies()  得到是一个数组, 我们遍历这个数组, 拿到name-value , 对移交的session的进行cookies设置. </p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Python/">Python</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/爬虫/">爬虫</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-clutch对app进行砸壳"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/17/clutch对app进行砸壳/">clutch对app进行砸壳</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/17/clutch对app进行砸壳/" class="article-date">
	  <time datetime="2017-11-17T01:55:29.000Z" itemprop="datePublished">November 17, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>逆向学习相关,实战一下对app的砸壳,砸壳必须要越狱手机哦.</p>
</blockquote>
<h3 id="什么是壳"><a href="#什么是壳" class="headerlink" title="什么是壳"></a>什么是壳</h3><p>一个App无论是Android还是ios, 或者是PC平台, 为了保护app都会加上一层壳, 加壳的app可能无法被一些IDA之类的工具解析, 那么也就无法搞事情,所以砸壳是必须走的一步,也可以从某助手平台下载已砸壳的, 当然最好用下面的命令确认下先.<br>怎么查看一个app是否有壳, 可以使用下面的命令, 替换为App的二进制文件查看:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">otool -l targetBinary | grep cryptid</div></pre></td></tr></table></figure></p>
<blockquote>
<p>得到的结果如果是1则是未砸壳的, 0是已砸壳.<br>还有一种情况是一些App支持多种架构的,可能会展示多个cryptid=1/0, 在哪个平台跑就砸哪个.</p>
</blockquote>
<h3 id="确定目标后安装App"><a href="#确定目标后安装App" class="headerlink" title="确定目标后安装App"></a>确定目标后安装App</h3><p>我这里以麦当劳App(听说改名金拱门)为例,从appStore下载安装.</p>
<h3 id="编译clutch二进制文件"><a href="#编译clutch二进制文件" class="headerlink" title="编译clutch二进制文件"></a>编译clutch二进制文件</h3><p>clutch神器<a href="https://github.com/KJCracks/Clutch" target="_blank" rel="external">下载地址</a>, 下载编译后允许会得到一个二进制文件, 这里不累述哈, 或者你可以直接从我的<a href="https://github.com/Paulswith/ToolsScript" target="_blank" rel="external">git地址</a>clone我编译后的,在clutch_binary文件下.</p>
<h3 id="拷贝clutch到设备"><a href="#拷贝clutch到设备" class="headerlink" title="拷贝clutch到设备"></a>拷贝clutch到设备</h3><h4 id="连接手机"><a href="#连接手机" class="headerlink" title="连接手机"></a>连接手机</h4><p><img src="/2017/11/17/clutch对app进行砸壳/remote.png" alt=""><br>我这里用iproxy从22映射到2222端口,并整个过程保持. 右边线尝试登录下,默认密码是alpine, 其他情况就自行谷歌帮助,我相信这没什么难度.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">iproxy 2222 22</div></pre></td></tr></table></figure></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ssh root@localhost -p 2222</div></pre></td></tr></table></figure>
<p>测试连接成功后输入 <code>exit</code> 退出,接着下一步</p>
<h4 id="scp拷贝到手机"><a href="#scp拷贝到手机" class="headerlink" title="scp拷贝到手机"></a>scp拷贝到手机</h4><p>scp(secure copy) 支持ssh协议远程拷贝, 我们用它拷贝到设备上, 前提是上面的<br>的测试成功了.<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">scp -P 2222 ./clutch root@localhost:/usr/bin/</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/17/clutch对app进行砸壳/copyto.png" alt=""><br>如果这样子的话就成功了, /usr/bin/默认已经在环境变量查找内, 拷贝到这里可以省事很多多.</p>
<h4 id="找到目标"><a href="#找到目标" class="headerlink" title="找到目标"></a>找到目标</h4><p>先介绍下clutch用法:<br><img src="/2017/11/17/clutch对app进行砸壳/usafe.png" alt=""><br>推荐<code>ios-deploy -B</code>可以获取bundleID, <code>brew install ios-deploy</code>就可以安装了.<br><img src="/2017/11/17/clutch对app进行砸壳/searchBD.png" alt=""><br>例如我这里的目标是麦当劳app, 尝试搜一下<code>mc</code>,果不其然就是它了.<br>拿到的bundleID就是<code>com.mcdonalds.gma</code><br>(嗯, 还有个grep的方法更简单,但是我真的不知道它是麦当劳, 因为他显示的是Arch,所以靠谱的话就还是上面,BundleID基本会跟名称一直吧)<br><img src="/2017/11/17/clutch对app进行砸壳/nofound.png" alt=""></p>
<h4 id="开始砸壳"><a href="#开始砸壳" class="headerlink" title="开始砸壳"></a>开始砸壳</h4><p>连接设备<code>ssh root@localhost -p 2222</code><br>进入命令行后输入:<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">clutch -b com.mcdonalds.gma</div></pre></td></tr></table></figure></p>
<p><img src="/2017/11/17/clutch对app进行砸壳/succeed.png" alt=""><br>看到这样子的情况的话就是成功了,注意这里粉红色部分, 还给出了砸成功之后的存储路径,我们拷贝下它</p>
<h4 id="把成果拿到本地验证"><a href="#把成果拿到本地验证" class="headerlink" title="把成果拿到本地验证"></a>把成果拿到本地验证</h4><p>方法有很多, 例如用ifunbox打开上面的路径,直接拿出来, 但是我的9.3.5的没有办法在Ifunbox查看系统目录, 所以用下路的这个方法<br><img src="/2017/11/17/clutch对app进行砸壳/getzip.png" alt=""><br>–&gt; 就是压缩然后scp到本地</p>
<h3 id="验收"><a href="#验收" class="headerlink" title="验收"></a>验收</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">otool -l tagerBinary | grep cryptid</div></pre></td></tr></table></figure>
<p><img src="/2017/11/17/clutch对app进行砸壳/6.png" alt=""><br>意料之中的cryptid=0<br>为啥只显示一个,因为它只有一个架构<code>arm_v7</code></p>
<p><code>[后面的话把逆向的轮子方法一并列出]</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/reverseEngineering/">reverseEngineering</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/砸壳/">砸壳</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-小tip之mac动态背景"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/16/小tip之mac动态背景/">小tip之mac动态背景</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/16/小tip之mac动态背景/" class="article-date">
	  <time datetime="2017-11-16T12:16:58.000Z" itemprop="datePublished">November 16, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>作为一个mac粉, 动态背景怎么能少,现在分享一个小tip,有兴趣的往下看</p>
</blockquote>
<h3 id="app安装"><a href="#app安装" class="headerlink" title="app安装"></a>app安装</h3><p>其实事情是一款App就可以搞定了, 但是好像国内搜不到, 我把它压缩传到了我的github上,你可以clone git, 然后在DymaticWallpaper里面找到它,解压并安装即可.<br>git 地址: <a href="https://github.com/Paulswith/ToolsScript.git" target="_blank" rel="external">https://github.com/Paulswith/ToolsScript.git</a></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><p>安装后, 在屏幕上上方的状态栏可以看到它, 选择点击下载即可, 但它的资源真的很糟糕 </p>
<ul>
<li>主要是分辨率太低</li>
<li>没有对比就没有伤害,对比我待会给你讲的这些资源它真的很逊</li>
<li>处女座就是挑,大佬们,我说的是我…</li>
</ul>
<h3 id="用最酷的视频替换它"><a href="#用最酷的视频替换它" class="headerlink" title="用最酷的视频替换它"></a>用最酷的视频替换它</h3><p><a href="http://a1.phobos.apple.com/us/r1000/000/Features/atv/AutumnResources/videos/entries.json" target="_blank" rel="external">点我跳转到视频源地址</a><br>我在一篇<a href="https://paulswith.github.io/2017/11/16/mac%E4%B8%8A%E7%9A%84Mysql%E8%B8%A9%E5%9D%91%E8%AE%B0/" target="_blank" rel="external">博文</a>中还针对它进数据库存储,因为真是稀缺~ 似乎一段时间还会更新一次, 资源的贡献者是国外的一位大牛<a href="https://github.com/JohnCoates/Aerial" target="_blank" rel="external">johnCoates</a>.<br>可能他的作品是可以用的,但是一直有问题,才用这个app替代.</p>
<h4 id="选取视频并下载"><a href="#选取视频并下载" class="headerlink" title="选取视频并下载"></a>选取视频并下载</h4><p><img src="/2017/11/16/小tip之mac动态背景/url.png" alt=""><br>浏览器打开下载到本地</p>
<h4 id="执行替换"><a href="#执行替换" class="headerlink" title="执行替换"></a>执行替换</h4><p>改名为1.mp4(严格大小写),拖到LiveDesktopPro的这个路径,例如我:<br><code>/Applications/LiveDesktop Pro.app/Contents/Resources</code><br><img src="/2017/11/16/小tip之mac动态背景/path.png" alt=""><br>需要权限,输入确认即可<br>一共允许1,2,3,4个文件替换, 依然是改为.mp4的后缀, 不管方法土不土,就是可行.<br>现在重进打开App,选择视频1,即可看到刚才视频了.</p>
<p>没有找到好的gif转换软件, png将就,这是我选的视频,白天黑夜都使用.<br><img src="/2017/11/16/小tip之mac动态背景/bg.png" alt=""></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/macTools/">macTools</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/macTools/">macTools</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-ios重签名脚本的0到1"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/14/ios重签名脚本的0到1/">ios重签名脚本的0到1</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/14/ios重签名脚本的0到1/" class="article-date">
	  <time datetime="2017-11-14T12:03:21.000Z" itemprop="datePublished">November 14, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>对重签名脚本进行了规范的踩坑 , 挤出一个微笑后写下这篇博文<br>感谢Google, 感谢我生涩的swift 之阅读IosAppResigner源码</p>
</blockquote>
<h3 id="Profile"><a href="#Profile" class="headerlink" title="Profile"></a>Profile</h3><p><img src="/2017/11/14/ios重签名脚本的0到1/sign_profile.png" alt=""></p>
<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./resign.sh /Users/dobby/Desktop/微信-已砸壳.ipa  /Users/dobby/Desktop/original.mobileprovision  com.weixin.resign</div></pre></td></tr></table></figure>
<ul>
<li>$1 需要砸壳过的ipa,从PP助手下载即可</li>
<li>$2 .mobileprovision 这个是证书对应的文件,也可以指定证书Xcode的product下也会生成</li>
<li>$3 是否修改bundleID,默认是原先的</li>
</ul>
<p><img src="/2017/11/14/ios重签名脚本的0到1/signstr.png" alt=""></p>
<blockquote>
<p>脚本内部需要写入一个一个签名字符串,可以通过下方的命令拿到<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">security find-identity -v -p codesigning</div></pre></td></tr></table></figure></p>
<p>若是cryptid显示为0,非砸壳为1. 砸壳虽不影响签名的成功率, 但是我试了下可安装,但不可使用. 可google下砸壳方法自行砸壳.下面是查看cryptid的命令<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">otool -l ./腾讯手机管家-来电防骚扰的QQ安全助手\(正版\)/Payload/MQQSecure.app/MQQSecure | grep cryptid</div></pre></td></tr></table></figure></p>
</blockquote>
<h3 id="mobileProvision生成Entitlements-plist"><a href="#mobileProvision生成Entitlements-plist" class="headerlink" title="mobileProvision生成Entitlements.plist"></a>mobileProvision生成Entitlements.plist</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">security cms -D -i $provision &gt; ProvisionProfile.plist </div><div class="line">/usr/libexec/PlistBuddy -x -c "Print Entitlements" ProvisionProfile.plist &gt; $tempPlace/Entitlements.plist</div></pre></td></tr></table></figure>
<p>用该方法生成一个Entitlements.plist文件,之前还没找到这么快捷的生成方法, 有个土方法自己折腾出来的也是可行的,详见<a href="https://paulswith.github.io/2017/11/14/plist%E6%96%87%E4%BB%B6-%E5%9C%A8%E8%84%9A%E6%9C%AC%E4%B8%AD%E7%9A%84%E6%93%8D%E4%BD%9C/" target="_blank" rel="external">plist文件-在脚本中的操作</a></p>
<h3 id="mobileProvision拷贝为embedded-mobileprovision"><a href="#mobileProvision拷贝为embedded-mobileprovision" class="headerlink" title="mobileProvision拷贝为embedded.mobileprovision"></a>mobileProvision拷贝为embedded.mobileprovision</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">cp $provision $appPlace/embedded.mobileprovision</div></pre></td></tr></table></figure>
<h3 id="是否概要更改BundleID"><a href="#是否概要更改BundleID" class="headerlink" title="是否概要更改BundleID"></a>是否概要更改BundleID</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if [[ $3 ]]; then</div><div class="line">	plutil -replace CFBundleIdentifier -string "$3" $appPlace/Info.plist</div><div class="line">	reBundleID=`plutil -p $appPlace/Info.plist | grep 'CFBundleIdentifier' `</div><div class="line">	echo "Log info : you wanna replace to: $&#123;reBundleID&#125;"</div><div class="line">fi</div></pre></td></tr></table></figure>
<p>默认的时候是原先的, BundleID安装到设备上是唯一的,若是原版本共存,必须要更改</p>
<h3 id="删除影响签名文件"><a href="#删除影响签名文件" class="headerlink" title="删除影响签名文件"></a>删除影响签名文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">plutil -remove CFBundleREsourceSpecification $appPlace/Info.plist   #删除签名源文件相关</div><div class="line">rm -rf $appPlace/Watch  #发现watch插件必现失败,这个必须删除了</div><div class="line">rm -rf $appPlace/PlugIns #发现PlugIns插件必现失败,这个必须删除了,就算下面重签也不管的, 坑超多</div><div class="line">codesignInfo=`find $appPlace -name "CodeResources" `</div><div class="line">for i in $codesignInfo; do</div><div class="line">	rm -f $i</div><div class="line">done</div></pre></td></tr></table></figure>
<ul>
<li>对Info.plist里面的CFBundleREsourceSpecification这个key删除,具体不知道做了什么,IosAppSigner也这么做了</li>
<li>Watch和Plugins这两个文件,我曾试过对他们都进行重签名, 但依然不管用, 相关坑大概是独立性,可以跳转到<a href="https://nianxi.net/ios/dump-decrypted-ios-app-extensions.html" target="_blank" rel="external">念茜女神</a>的博文了解</li>
<li>源文件的_CodeSignature/CodeResources也进行了全局删除,签名后会自动生成这个文件</li>
</ul>
<h3 id="开始重签"><a href="#开始重签" class="headerlink" title="开始重签"></a>开始重签</h3><h4 id="第一步-相关lib-framework签名"><a href="#第一步-相关lib-framework签名" class="headerlink" title="第一步,相关lib-framework签名"></a>第一步,相关lib-framework签名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">allShouldSign=` find $appPlace -name "*.appex" &amp;&amp; find $appPlace  -name "*.framework" &amp;&amp; find $appPlace  -name "*.dylib" &amp;&amp; find $appPlace/* -name "*.app" ` #最上层的先不签</div><div class="line">for i in $allShouldSign; do</div><div class="line">	codesign -fs "$&#123;signStr&#125;" --no-strict --entitlements=/tmp/project_resign/Entitlements.plist $i</div><div class="line">done</div></pre></td></tr></table></figure>
<ul>
<li>对上方类型都进行一篇搜索,得到绝对路径后进行重签名<br><img src="/2017/11/14/ios重签名脚本的0到1/type.png" alt=""><blockquote>
<p>这是iosAppResigner中,作者对着全部的类型都检索了一遍,我并完全覆盖,如果你踩到了坑,可以试试把类型都加上</p>
</blockquote>
</li>
</ul>
<h4 id="核心包签名"><a href="#核心包签名" class="headerlink" title="核心包签名"></a>核心包签名</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">codesign -vvv -fs "$signStr" --no-strict --entitlements=/tmp/project_resign/Entitlements.plist $appPlace</div></pre></td></tr></table></figure>
<h3 id="打包为ipa"><a href="#打包为ipa" class="headerlink" title="打包为ipa"></a>打包为ipa</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">cd $tempPlace</div><div class="line">zip -qry sign.ipa ./Payload</div><div class="line">mv $tempPlace/sign.ipa ~/Desktop</div></pre></td></tr></table></figure>
<ul>
<li>因为打包的时候是递归形式的, 指定绝对路径会踩坑,注意就行</li>
</ul>
<h3 id="安装试试"><a href="#安装试试" class="headerlink" title="安装试试"></a>安装试试</h3><p><img src="/2017/11/14/ios重签名脚本的0到1/install.png" alt=""></p>
<p><a href="https://github.com/Paulswith/ToolsScript/tree/master/iosResign" target="_blank" rel="external">- - -附源码github链接</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Unix/">Unix</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iosDev/">iosDev</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-plist文件-在脚本中的操作"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/14/plist文件-在脚本中的操作/">plist文件-在脚本中的操作</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/14/plist文件-在脚本中的操作/" class="article-date">
	  <time datetime="2017-11-14T11:30:39.000Z" itemprop="datePublished">November 14, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>背景是写一个自动签名的脚本, 真的是从0到1的踩坑记, 其中需要对.provision文件进行签名信息截取, 并生成.plist文件</p>
</blockquote>
<h3 id="method-ONE"><a href="#method-ONE" class="headerlink" title="method_ONE"></a>method_ONE</h3><h4 id="内容截取并保存临时文件中"><a href="#内容截取并保存临时文件中" class="headerlink" title="内容截取并保存临时文件中"></a>内容截取并保存临时文件中</h4><p>先看看.provision文字长什么样子, 我截取了其中一部分展示的信息,其中我们要的内容是从dict到dict之间<br><img src="/2017/11/14/plist文件-在脚本中的操作/all.png" alt=""><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">security cms -D -i ./original.mobileprovision | grep --after-context=20 "&lt;key&gt;Entitlements&lt;/key&gt;"  &gt; /tmp/tmp_provision</div></pre></td></tr></table></figure></p>
<p>读取匹配的信息,并保存到/tmp/tmp_provision这个文件中</p>
<h4 id="python进行正则匹配-过滤dict之后的内容"><a href="#python进行正则匹配-过滤dict之后的内容" class="headerlink" title="python进行正则匹配,过滤dict之后的内容"></a>python进行正则匹配,过滤dict之后的内容</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">provision=`python -c "from re import findall,compile,S;data=open('/tmp/tmp_provision','r').read();print findall(compile(r'&lt;dict&gt;.*&lt;/dict&gt;',S),data)[0];"`</div></pre></td></tr></table></figure>
<h4 id="最后重定向到一个-plist文件中"><a href="#最后重定向到一个-plist文件中" class="headerlink" title="最后重定向到一个.plist文件中"></a>最后重定向到一个.plist文件中</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">echo '&lt;?xml version="1.0" encoding="UTF-8"?&gt;&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;&lt;plist version="1.0"&gt;'$provision'&lt;/plist&gt;' &gt; Entitlements.plist</div></pre></td></tr></table></figure>
<blockquote>
<p>这个方法虽然可以, 但是其中第三部, 必须要格外注意字符的使用, 不然就格式不对,导致重定向出来的无法识别为.plist</p>
</blockquote>
<h3 id="method-TWO"><a href="#method-TWO" class="headerlink" title="method_TWO"></a>method_TWO</h3><h4 id="重定向为一个-plist"><a href="#重定向为一个-plist" class="headerlink" title="重定向为一个.plist"></a>重定向为一个.plist</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">security cms -D -i ./original.mobileprovision &gt; ProvisionProfile.plist</div></pre></td></tr></table></figure>
<p>查看到全部的信息, 重定向为一个ProvisionProfile.plist,还没有过滤</p>
<h4 id="提取内容生成"><a href="#提取内容生成" class="headerlink" title="提取内容生成"></a>提取内容生成</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">/usr/libexec/PlistBuddy -x -c "Print Entitlements" ProvisionProfile.plist &gt; Entitlements.plist</div></pre></td></tr></table></figure>
<p>直接将里面的子项Entitlements拿出来,生成一个新的Entitlements.plist</p>
<blockquote>
<p>这个方法比上面的稳妥不知道多少倍, 但是第一个的方法是自己钻研</p>
</blockquote>
<h3 id="plist文件的增删改查"><a href="#plist文件的增删改查" class="headerlink" title=".plist文件的增删改查"></a>.plist文件的增删改查</h3><p><img src="/2017/11/14/plist文件-在脚本中的操作/plutil.png" alt=""><br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">plutil -p ./ProvisionProfile.plist  #查看</div><div class="line">plutil -insert Insert -string "insert data here" ./ProvisionProfile.plist    #增</div><div class="line">plutil -replace Insert -string "change  data here" ./ProvisionProfile.plist  #替换</div></pre></td></tr></table></figure></p>
<blockquote>
<p>列举的就诸如此类,plutil是一个.plist官方推荐的好工具</p>
</blockquote>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Unix/">Unix</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-shell脚本中如何捕获异常"  class="article article-type-post" itemscope itemprop="blogPost" >
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/11/14/shell脚本中如何捕获异常/">shell脚本中如何捕获异常</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/11/14/shell脚本中如何捕获异常/" class="article-date">
	  <time datetime="2017-11-14T10:56:50.000Z" itemprop="datePublished">November 14, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>在高级语言的时候,我们可以使用捕获异常的语句, 进行catch, 并和谐的处理, 但是shell是没有类似keyword的, 如何解决?<br>答案是 <code>#?</code> : <code>用于捕获上一条命令的状态,0的状态为正常,1为异常</code><br>自己在整理shell的时候遇到一些坑, 把它的规范列一下</p>
</blockquote>
<h3 id="和echo输出命令要注意"><a href="#和echo输出命令要注意" class="headerlink" title="#?和echo输出命令要注意"></a>#?和echo输出命令要注意</h3><p><img src="/2017/11/14/shell脚本中如何捕获异常/echo1.png" alt=""><br>这是一条echo输出命令,命令处于``之中,输出后执行. 但是命令是错误,执行的话会抛错误,也就是<code>echo $?</code>应该给到是1<br>但是看看执行结果:<br><img src="/2017/11/14/shell脚本中如何捕获异常/echo2.png" alt=""><br>看到输出的结果是0, 原因在于<code>echo</code>上, <code>echo</code>包了这一层命令, 只要<code>echo</code>直接将这命令打印在终端, 就是完整的完成工作,根本没有异常可言.</p>
<h3 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h3><p>当然是去除<code>echo</code>直接输出, 但是还是要注意的是, <code>$?</code>仅仅提示是上一条,这里必须十分谨慎.列下能捕获到异常:<br><img src="/2017/11/14/shell脚本中如何捕获异常/fix1.png" alt=""><br><img src="/2017/11/14/shell脚本中如何捕获异常/fix2.png" alt=""><br>可以看到输出是1了, 确认命令使用没问题后,就可以进行逻辑处理.</p>
<h3 id="避免"><a href="#避免" class="headerlink" title="避免"></a>避免</h3><p>这是完整的逻辑代码:<br><img src="/2017/11/14/shell脚本中如何捕获异常/full1.png" alt=""><br>更好的避免, 将允许的条件, 并到逻辑与:<br><img src="/2017/11/14/shell脚本中如何捕获异常/full2.png" alt=""></p>
<p><code>[shell大法好]</code></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
	<span class="ico-folder"></span>
    <a class="article-category-link" href="/categories/Unix/">Unix</a>

      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/shell/">shell</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">Précédent</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Suivant</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Rechercher…" value="" name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Rechercher">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something..."/>
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/Paulswith" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:jevo747@gmail.com?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Articles récents</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/10/14/aliyun-ddns设置定时监控更新/">aliyun-ddns设置定时监控更新</a></h6>
              <span>October 14, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/06/20/读书记-原则/">读书记-&lt;原则&gt;</a></h6>
              <span>June 20, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/06/05/xcode9之后的打包方式/">xcode9之后的打包方式</a></h6>
              <span>June 5, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/02/25/机器学习迁移模型到IOS/">机器学习迁移模型到IOS</a></h6>
              <span>February 25, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/02/24/迁移学习InceptionV3/">迁移学习InceptionV3</a></h6>
              <span>February 24, 2018</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2018/02/01/部署TensorFlow到Colaboratory/">部署TensorFlow到Colaboratory</a></h6>
              <span>February 1, 2018</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/MachineLearning/">MachineLearning</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MyProgram/">MyProgram</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Objective-C/">Objective-C</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python/">Python</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Unix/">Unix</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/macTools/">macTools</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/reverseEngineering/">reverseEngineering</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a><span class="category-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2018年读的书/">2018年读的书</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Colaboratory/">Colaboratory</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DDNS/">DDNS</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TensorFlow/">TensorFlow</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Windows/">Windows</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/brewupgradeError/">brewupgradeError</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iosDev/">iosDev</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macApp-Divvy破解/">macApp-Divvy破解</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/macTools/">macTools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/testTools/">testTools</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/verificationCode/">verificationCode</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/实战去除广告/">实战去除广告</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/爬虫/">爬虫</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/砸壳/">砸壳</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/自动化/">自动化</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/迁移学习/">迁移学习</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/迁移学习移植IOS/">迁移学习移植IOS</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆向UNREAD/">逆向UNREAD</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/逆向探探/">逆向探探</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/2018年读的书/" style="font-size: 10px;">2018年读的书</a> <a href="/tags/Colaboratory/" style="font-size: 10px;">Colaboratory</a> <a href="/tags/DDNS/" style="font-size: 10px;">DDNS</a> <a href="/tags/TensorFlow/" style="font-size: 20px;">TensorFlow</a> <a href="/tags/Windows/" style="font-size: 10px;">Windows</a> <a href="/tags/brewupgradeError/" style="font-size: 10px;">brewupgradeError</a> <a href="/tags/iosDev/" style="font-size: 20px;">iosDev</a> <a href="/tags/macApp-Divvy破解/" style="font-size: 10px;">macApp-Divvy破解</a> <a href="/tags/macTools/" style="font-size: 10px;">macTools</a> <a href="/tags/shell/" style="font-size: 20px;">shell</a> <a href="/tags/testTools/" style="font-size: 10px;">testTools</a> <a href="/tags/verificationCode/" style="font-size: 10px;">verificationCode</a> <a href="/tags/实战去除广告/" style="font-size: 10px;">实战去除广告</a> <a href="/tags/爬虫/" style="font-size: 10px;">爬虫</a> <a href="/tags/砸壳/" style="font-size: 20px;">砸壳</a> <a href="/tags/自动化/" style="font-size: 10px;">自动化</a> <a href="/tags/迁移学习/" style="font-size: 10px;">迁移学习</a> <a href="/tags/迁移学习移植IOS/" style="font-size: 20px;">迁移学习移植IOS</a> <a href="/tags/逆向UNREAD/" style="font-size: 10px;">逆向UNREAD</a> <a href="/tags/逆向探探/" style="font-size: 10px;">逆向探探</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">October 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/06/">June 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/02/">February 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">January 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">December 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/11/">November 2017</a><span class="archive-list-count">12</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2020 In &#39;flight of thought&#39; All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1260716016&web_id=1260716016" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
</body>
</html>
